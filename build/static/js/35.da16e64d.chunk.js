webpackJsonp([35],{550:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r.n(o),i=r(57),u=r(207),l=r(578),f=r.n(l),p=r(58),h=r(118),m=r.n(h),d=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),y=[{id:1,path:"song",name:"\u5355\u66f2"},{id:100,path:"artist",name:"\u6b4c\u624b"},{id:10,path:"album",name:"\u4e13\u8f91"},{id:1004,path:"mv",name:"MV"},{id:1006,path:"lrc",name:"\u6b4c\u8bcd"},{id:1e3,path:"playlist",name:"\u6b4c\u5355"},{id:1009,path:"radio",name:"\u4e3b\u64ad\u7535\u53f0"},{id:1002,path:"user",name:"\u7528\u6237"}],g=function(e){function t(e){n(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={keywords:"",currType:"song",showSrchSuggest:!1,searchSuggests:[{name:"\u5355\u66f2",icon:"u-icn-26",href:"/song",list:[]},{name:"\u6b4c\u624b",icon:"u-icn-27",href:"/artist",list:[]},{name:"\u4e13\u8f91",icon:"u-icn-28",href:"/album",list:[]},{name:"MV",icon:"u-icn-96",href:"/mv",list:[]},{name:"\u6b4c\u5355",icon:"u-icn-29",href:"/playlist",list:[]}]},r.search=function(e){var t=r.searchInput.value,n=r.state.currType;if(!t)return r.setState({showSrchSuggest:!1}),!1;if(13!==e.keyCode)r.setState({showSrchSuggest:!0}),m.a.all([p.h(t,1,0,4),p.h(t,100,0,3),p.h(t,10,0,2),p.h(t,1004,0,2),p.h(t,1e3,0,3)]).then(function(e){console.log(e);var t=Object.assign([],r.state.searchSuggests);console.log(t),t[0].list=e[0].data.result.songs||[],t[1].list=e[1].data.result.artists||[],t[2].list=e[2].data.result.albums||[],t[3].list=e[3].data.result.mvs||[],t[4].list=e[4].data.result.playlists||[],r.setState({searchSuggest:t})});else{if(console.log(1),void 0===t||t==r.state.keywords)return!1;r.props.history.push("/search/"+n+"?keywords="+t),r.setState({showSrchSuggest:!1})}},r.toResultPage=function(){var e=r.searchInput.value,t=r.state.currType;if(void 0===e||e==r.state.keywords)return!1;r.props.history.push("/search/"+t+"?keywords="+e)},r}return c(t,e),d(t,[{key:"componentDidMount",value:function(){var e=f.a.parse(this.props.location.search).keywords,t=this.props.location.pathname.slice(8);this.searchInput.value=e||"",this.setState({keywords:e||"",currType:t})}},{key:"componentWillReceiveProps",value:function(e){var t=f.a.parse(e.location.search).keywords,r=e.location.pathname.slice(8);this.searchInput.value=t||"",this.setState({keywords:t||"",currType:r})}},{key:"render",value:function(){var e=this,t=this.state,r=t.keywords,n=t.searchSuggests;return s.a.createElement("div",{className:"g-bd"},s.a.createElement("div",{className:"g-wrap n-srch"},s.a.createElement("div",{className:"pgsrch f-pr j-suggest"},s.a.createElement("input",{id:"m-search-input",type:"text",className:"srch j-flag",ref:function(t){e.searchInput=t},onBlur:function(t){return setTimeout(function(){return e.setState({showSrchSuggest:!1})},50)},onKeyUp:this.search}),s.a.createElement("a",{onClick:function(t){return e.toResultPage()},className:"btn j-flag"},"\u641c\u7d22"),s.a.createElement("div",{className:"u-lstlay",style:{display:this.state.showSrchSuggest?"block":"none"}},s.a.createElement("div",{className:"m-schlist"},s.a.createElement("p",{className:"note s-fc3"},s.a.createElement(i.f,{to:this.searchInput?"/search/song?keywords="+this.searchInput.value:"",className:"s-fc3 xtag"},"\u641c\u201c",this.searchInput?this.searchInput.value:null,"\u201d \u76f8\u5173\u7528\u6237")," >"),s.a.createElement("div",{className:"rap"},n.map(function(e,t){return s.a.createElement("div",{className:"itm clearfix",key:t,style:{display:e.list.length?"block":"none"}},s.a.createElement("h3",{className:"hd"},s.a.createElement("i",{className:"icn u-icn "+e.icon}),s.a.createElement("em",{className:"f-fl"},e.name)),s.a.createElement("ul",{className:t%2==0?"clearfix":"odd clearfix"},e.list.length?e.list.map(function(r,n){return s.a.createElement("li",{key:n},s.a.createElement("a",{href:e.href+"?id="+r.id,className:"s-fc0 f-thide xtag"},0==t?r.name+"-"+r.artists.map(function(e){return e.name}).join("/"):r.name))}):null))}))))),s.a.createElement("div",{className:"m-search"},s.a.createElement("div",{className:"space"}),s.a.createElement("ul",{className:"m-tabs m-tabs-srch f-cb ztag"},y.map(function(e,t){return s.a.createElement("li",{key:t},s.a.createElement(i.f,{to:"/search/"+e.path+"?keywords="+r,isActive:function(t,r){return-1!=r.pathname.indexOf(e.path)},activeClassName:"sel"},s.a.createElement("em",null,e.name)))})),this.props.routes.map(function(e,t){return s.a.createElement(u.a,Object.assign({key:t},e))}))))}}]),t}(o.Component);t.default=g},575:function(e,t,r){"use strict";function n(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),a=e.slice(t);return Array.prototype.concat.call([],n(r),n(a))}function a(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(o),r=1;r<t.length;r++)e=n(t,r).join(""),t=e.match(o);return e}}function c(e){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},r=s.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=a(r[0]);n!==r[0]&&(t[r[0]]=n)}r=s.exec(e)}t["%C2"]="\ufffd";for(var c=Object.keys(t),o=0;o<c.length;o++){var i=c[o];e=e.replace(new RegExp(i,"g"),t[i])}return e}var o=new RegExp("%[a-f0-9]{2}","gi"),s=new RegExp("(%[a-f0-9]{2})+","gi");e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return c(e)}}},576:function(e,t,r){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},577:function(e,t,r){"use strict";function n(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var a=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var r,s,i=n(e),u=1;u<arguments.length;u++){r=Object(arguments[u]);for(var l in r)c.call(r,l)&&(i[l]=r[l]);if(a){s=a(r);for(var f=0;f<s.length;f++)o.call(r,s[f])&&(i[s[f]]=r[s[f]])}}return i}},578:function(e,t,r){"use strict";function n(e){switch(e.arrayFormat){case"index":return function(t,r,n){return null===r?[c(t,e),"[",n,"]"].join(""):[c(t,e),"[",c(n,e),"]=",c(r,e)].join("")};case"bracket":return function(t,r){return null===r?c(t,e):[c(t,e),"[]=",c(r,e)].join("")};default:return function(t,r){return null===r?c(t,e):[c(t,e),"=",c(r,e)].join("")}}}function a(e){var t;switch(e.arrayFormat){case"index":return function(e,r,n){if(t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),!t)return void(n[e]=r);void 0===n[e]&&(n[e]={}),n[e][t[1]]=r};case"bracket":return function(e,r,n){return t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0===n[e]?void(n[e]=[r]):void(n[e]=[].concat(n[e],r)):void(n[e]=r)};default:return function(e,t,r){if(void 0===r[e])return void(r[e]=t);r[e]=[].concat(r[e],t)}}}function c(e,t){return t.encode?t.strict?s(e):encodeURIComponent(e):e}function o(e){return Array.isArray(e)?e.sort():"object"===typeof e?o(Object.keys(e)).sort(function(e,t){return Number(e)-Number(t)}).map(function(t){return e[t]}):e}var s=r(576),i=r(577),u=r(575);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){t=i({arrayFormat:"none"},t);var r=a(t),n=Object.create(null);return"string"!==typeof e?n:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach(function(e){var t=e.replace(/\+/g," ").split("="),a=t.shift(),c=t.length>0?t.join("="):void 0;c=void 0===c?null:u(c),r(u(a),c,n)}),Object.keys(n).sort().reduce(function(e,t){var r=n[t];return Boolean(r)&&"object"===typeof r&&!Array.isArray(r)?e[t]=o(r):e[t]=r,e},Object.create(null))):n},t.stringify=function(e,t){t=i({encode:!0,strict:!0,arrayFormat:"none"},t);var r=n(t);return e?Object.keys(e).sort().map(function(n){var a=e[n];if(void 0===a)return"";if(null===a)return c(n,t);if(Array.isArray(a)){var o=[];return a.slice().forEach(function(e){void 0!==e&&o.push(r(n,e,o.length))}),o.join("&")}return c(n,t)+"="+c(a,t)}).filter(function(e){return e.length>0}).join("&"):""}}});
//# sourceMappingURL=35.da16e64d.chunk.js.map